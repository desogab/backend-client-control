generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Client {
  id                String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  active            Boolean?          @default(true)
  sponsor           Boolean?
  name              String            @db.VarChar(50)
  surname           String            @db.VarChar(100)
  birthdate         DateTime          @db.Date
  cpf               String            @unique @db.VarChar(14)
  email             String            @unique @db.VarChar(100)
  phone             String            @unique @db.VarChar(15)
  consultationPrice Decimal           @db.Money
  createdAt         DateTime          @default(now())
  updatedAt         DateTime?         @updatedAt
  professionalId    String            @db.Uuid
  professionalUser  ProfessionalUser  @relation(fields: [professionalId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  clientAddress     ClientAddress?
  clientEmergency   ClientEmergency?
  clientSponsor     ClientSponsor?
  consultationInfo  ConsultationInfo?
}

model ClientAddress {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  street     String    @db.VarChar(100)
  district   String    @db.VarChar(50)
  number     Int       @db.SmallInt
  city       String    @db.VarChar(50)
  complement String    @db.VarChar(25)
  state      String    @db.Char(2)
  zipcode    String    @db.VarChar(25)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime? @updatedAt
  clientId   String    @unique @db.Uuid
  client     Client    @relation(fields: [clientId], references: [id], onDelete: Cascade)
}

model ClientEmergency {
  id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name      String    @db.VarChar(50)
  surname   String    @db.VarChar(100)
  phone     String    @db.VarChar(15)
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt
  clientId  String    @unique @db.Uuid
  client    Client    @relation(fields: [clientId], references: [id], onDelete: Cascade)
}

model ClientSponsor {
  id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name      String    @db.VarChar(50)
  surname   String    @db.VarChar(100)
  cpf       String    @unique @db.VarChar(14)
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt
  clientId  String?   @unique @db.Uuid
  client    Client?   @relation(fields: [clientId], references: [id], onDelete: Cascade)
}

model ConsultationInfo {
  id               String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  dateVisit        DateTime         @db.Date
  hoursVisit       DateTime         @db.Time(6)
  model            String?          @db.VarChar(15)
  professionalId   String           @unique @db.Uuid
  clientId         String           @unique @db.Uuid
  client           Client           @relation(fields: [clientId], references: [id], onDelete: Cascade)
  professionalUser ProfessionalUser @relation(fields: [professionalId], references: [id], onDelete: Cascade)
}

model ProfessionalInfo {
  id                   String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name                 String           @db.VarChar(50)
  surname              String           @db.VarChar(100)
  birthdate            DateTime         @db.Date
  cpf                  String           @unique @db.VarChar(14)
  email                String           @unique @db.VarChar(100)
  phone                String           @unique @db.VarChar(15)
  profession           String           @db.VarChar(50)
  professionalDocument String           @unique @db.VarChar(50)
  createdAt            DateTime         @default(now())
  updatedAt            DateTime?        @updatedAt
  professionalUserId   String           @unique @db.Uuid
  professionalUser     ProfessionalUser @relation(fields: [professionalUserId], references: [id], onDelete: Cascade)
}

model ProfessionalUser {
  id               String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  username         String            @unique
  password         String
  client           Client[]
  consultationInfo ConsultationInfo?
  ProfessionalInfo ProfessionalInfo?
}
